<!DOCTYPE html>
<html lang="<%= I18n.locale %>">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="copyright" content="Worldwide Systems Services SAS Â© <%= Time.now.year %>" />
    <meta name="author" content="Worldwide Systems Services SAS" />
    <meta name="contact" content="contactenos@wssinternational.net" />
    <!--[if IE]>
      <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title><%= ( CONFIG['app']['name'].blank? ) ? yield( :title ) : "#{CONFIG['app']['name']} | #{yield( :title )}" %></title>
    <%= csrf_meta_tag %>
    <link id="themes_lnk" rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" />
    <%= stylesheet_link_tag( 'application' ) %>
  <%-
    stylesheets_path = File.join( RAILS_ROOT, 'public', 'stylesheets' )
    stylesheet_for_controller = File.join( stylesheets_path, "#{controller_name}.css" )
    stylesheet_for_action = File.join( stylesheets_path, controller_name, "#{action_name}.css" )
  -%>
    <%= stylesheet_link_tag( "#{controller_name}" ) if ( File.exist?( stylesheet_for_controller ) ) %>
    <%= stylesheet_link_tag( "#{controller_name}/#{action_name}" ) if ( File.exist?( stylesheet_for_action ) ) %>
    <%= yield( :head ) %>
  </head>
  <body class="ui-widget">
  <%- if ( user_signed_in? ) -%>
    <div class="ui-layout-north" style="display:none;">
      <%= render( { :partial => 'layouts/ui-layout-north/menu_bar' } ) %>
    </div>
    <div class="ui-layout-west" style="display:none;">
      <%= render( { :partial => 'layouts/ui-layout-west/left_bar' } ) %>
    </div>
  <%- end -%>
    <div class="ui-layout-center" style="display:none;">
      <%= render( { :partial => 'layouts/ui-layout-center/workspace' } ) %>
    </div>
  <%- if ( user_signed_in? ) -%>
    <div class="ui-layout-east" style="display:none;">
      <%= render( { :partial => 'layouts/ui-layout-east/right_bar' } ) %>
    </div>
    <div class="ui-layout-south" style="display:none;">
      <%= render( { :partial => 'layouts/ui-layout-south/task_bar' } ) %>
    </div>
  <%- end -%>
    <%= javascript_include_tag( 'http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js' ) %>
    <%= javascript_include_tag( 'jquery/jquery.rails.js' ) %>
    <%= javascript_include_tag( 'application' ) %>
  <%-
    javascripts_path = File.join( RAILS_ROOT, 'public', 'javascripts' )
    javascript_for_controller = File.join( javascripts_path, "#{controller_name}.js" )
    javascript_for_action = File.join( javascripts_path, controller_name, "#{action_name}.js" )
  -%>
    <%= javascript_include_tag( "#{controller_name}" ) if ( File.exist?( javascript_for_controller ) ) %>
    <%= javascript_include_tag( "#{controller_name}/#{action_name}" ) if ( File.exist?( javascript_for_action ) ) %>
    <%= yield( :bottom ) %>
<script type="text/javascript">
//<![CDATA[
  jQuery( document ).ready( function( $ ) {
    var jQueryUiUrl = 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js';
    
    $.getScript( jQueryUiUrl, function( data, textStatus ) {
      var jQueryLayoutUrl = 'http://layout.jquery-dev.net/lib/js/jquery.layout-latest.js';
      
      $.getScript( jQueryLayoutUrl, function( data, textStatus ) {
        var bodyLayoutOptions = {
          contentSelector : '.content',
          north__spacing_open : 0,
          togglerContent_open : '<span class="ui-icon"></span>',
          togglerContent_closed : '<span class="ui-icon"></span>'
        };
        bodyLayout = $( 'body' ).layout( bodyLayoutOptions );
        bodyLayout.allowOverflow( 'north' ); // Needed for the menus.
      });
      
      <%= yield( :document_ready_ui ) %>
      
      applyAdditionalStyles();
    });
    
    <%= yield( :document_ready ) %>
  });
  
  jQuery( window ).load( function( eventObject ) {
    <%= yield( :window_load ) %>
  });
//]]>
</script>
  </body>
</html>